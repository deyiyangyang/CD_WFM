@using WFM.Common;
@model IEnumerable<uspWFMGetOneWeekInboundCallResult>
@{
    ViewBag.Title = "Home Page";
}
<script src="@Url.Content("~/Scripts/Chart.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        ShowLineChart("IboundCallChart", "mm");
        ShowLineChart("IboundCallChartDay", "dd");
        ShowLineChart("IboundCallChartWeekDay", "dw");
    });

    function ShowLineChart(element,type) {
        var options = {
            legendTemplate: "<table class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><tr><td style=\"background-color:<%=datasets[i].strokeColor%>;width:20px\"></td><%if(datasets[i].label){%><td><%=datasets[i].label%></td><%}%></tr><%}%></table>",
            datasetFill: false
        }
        var obj = "#" + element;
        var ctx = $(obj).get(0).getContext("2d");
        var myChart = new Chart(ctx);
        var url = "@Html.Raw(Url.Action("LineChart", new { type = "param" }))";
        url = url.replace("param", type);
        $.ajax({
            cache: false,
            async: true,
            url: url,
            data: "{}",
            dataType: "json",
            type: "get",

            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(XMLHttpRequest.responseText);
            },
            success: function (response) {
                var lineChart = myChart.Line(response, options);
            }
        });
    }
</script>

<div class="row">
    <div class=" col-lg-12">
        <h2>月間着信回数 @ViewBag.UpdatedTime まで </h2>
        <canvas id="IboundCallChart" width="1200" height="300"></canvas>
    </div>

</div>
<div class="row">
    <div class=" col-lg-6">
        <h2>同じ日の着信回数</h2>
        <canvas id="IboundCallChartDay" width="600" height="300"></canvas>
    </div>
    <div class=" col-lg-6">
        <h2>同じ曜日の着信回数</h2>
        <canvas id="IboundCallChartWeekDay" width="600" height="300"></canvas>
    </div>
</div>