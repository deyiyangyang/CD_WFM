@using WFM.Common;
@using WFM.Models;
@model IEnumerable<WFM.Common.tblAgentDetailV3>
@{
    ViewBag.Title = "エージェント詳細";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int index = 0;
    int currentIndex = 0;
}
@Html.Partial("DatePickerScript")
@Html.Partial("SortScript")
<script type="text/javascript">
    $(document).ready(function () {
        $('#dtStart').datetimepicker(opt_datePicker);
        $('#dtEnd').datetimepicker(opt_datePicker);
        if (!$('#dtStart').val()) {
            $('#dtStart').datetimepicker('setDate', new Date().GetDateWithHHmmSS(0,0,0)); 
        }
        if (!$('#dtEnd').val())
        {            $('#dtEnd').datetimepicker('setDate', new Date().GetDateWithHHmmSS(23, 59, 59));
        }
          
    });

</script>
<section class="content">
    @using (Html.BeginForm())
    {
        @Html.Partial("SortHeader", AppConst.Const_Default_SortAction)
        <div class="row">
            <div class="col-md-12" >
                <div class="box box-primary" style="width:1050px;">
                    <div class="box-header">
                        <i class="fa fa-search"></i>
                        <h3 class="box-title">検索条件</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-primary btn-xs" data-widget="collapse" type="button"><i class="fa fa-minus"></i></button>
                        </div>
                    </div>
                    <div class="box-body" style="display: block;">
                        <table class="table table-bordered">
                            <tr>
                                <th style="width: 160px;vertical-align: middle;" class="thUpTitle">
                                    日付
                                </th>
                                <td style="vertical-align:middle;">
                                    @Html.TextBox("dtStart", null, new { maxLength = "20", @readonly = "readonly", style = "readonly;margin-right:5px;", @class = "form-control" })
                                    ～
                                    @Html.TextBox("dtEnd", null, new { maxLength = "20", @readonly = "readonly", style = "readonly;margin-right:5px;", @class = "form-control" })
                                </td>
                                <th class="thUpTitle" style="width: 50px;vertical-align: middle;">エージェント</th>
                                <td>@Html.DropDownList("lstAgent", (List<SelectListItem>)ViewData["lstAgent"], new { @class = "form-control" })</td>

                                <td style="vertical-align:middle;text-align:center;">
                                    <button type="submit" id="Search" name="Search" class="btn btn-primary" style="width: 100px;"><i class="fa fa-search"></i> 検索</button>
                                </td>
                            </tr>
                        </table>
                    </div><!-- /.box-body -->
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="box no-border">
                    @Html.Partial("PagerHeader", (PagerDataModel)ViewBag.PagerDataModel)

                    <table class="table table-bordered table-striped table-hover table-condensed text-center">
                        <tr>
                            <th>
                                ID
                            </th>
                            <th>
                                vLogin
                            </th>
                            <th>
                                vDisplay
                            </th>
                            <th>
                                局番グループ
                            </th>
                            <th>
                                スキルグループ
                            </th>
                            <th>
                                iAgentStatus
                            </th>
                            <th>
                                dtStatusStart
                            </th>
                            <th>
                                dtStatusEnd
                            </th>
                            <th>
                                iCallSessionProfileID
                            </th>
                        </tr>

                        @foreach (var item in Model)
                        {
                            index++;
                            currentIndex = (((PagerDataModel)ViewBag.PagerDataModel).CurrentPageIndex - 1) * ((PagerDataModel)ViewBag.PagerDataModel).CurrentPageSize + index;
                            <tr>
                                <td>
                                    @currentIndex
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.vLogin)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.vDisplay)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.groupName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.skillName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.iAgentStatus)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.dtStatusStart)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.dtStatusEnd)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.iCallSessionProfileID)
                                </td>
                            </tr>
                        }
                        @if (Model.Count() <= 0)
                        {
                            <tr>
                                <td colspan="10">
                                    @Html.Partial("NoResultFound")
                                </td>
                            </tr>
                        }
                    </table>
                    @Html.Partial("PageFooter", (PagerDataModel)ViewBag.PagerDataModel)
                </div>
            </div>
        </div>
    }
</section>
